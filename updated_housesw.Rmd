---
title: "updated_housesw.Rmd"
author: "lizzie tucker and Prof. Wendy Tam"
last updated: "2025-12-26"
output: html_document
---

```{r setup, include=TRUE}
# Load required packages
library(sna)
library(igraph)
```

```{r}
## read in the data

# vectors with 151307 lines, first and last left blank
sponsors <- scan("sponsors.vec", what=integer(), quiet=TRUE)
years <- scan("years.vec", what=integer(), quiet=TRUE)
numchamber <- scan("chamber.vec", what=integer(), quiet=TRUE)
cosponsors_raw <- readLines("cosponsors.vec")

# remove the first blank line from cosponsors; note that sponsors, years, and chamber all implicitly drop this line
cosponsors_raw <- cosponsors_raw[-1]

# cleaning the cosponsor vector to convert "NA" to empty list to best align with original data processing
cosponsors_raw[cosponsors_raw == "NA"] <- ""

# remove trailing blank line ONLY if too long
if (length(cosponsors_raw) > length(sponsors)) {
    cosponsors_raw <- cosponsors_raw[1:length(sponsors)]
}

cosponsors <- cosponsors_raw

# verifying length of vectors--all must be the same
length(sponsors); length(years); length(chamber); length(cosponsors)
if(!(length(sponsors)==length(years) &&
length(years)==length(chamber) &&
length(chamber)==length(cosponsors))) {
stop("ERROR: sponsors/years/chamber/cosponsors are not the same length.")
}
```

```{r}
# separate bills into house and senate (H=2, S=1 in numchamber)
# house is length 98414

hs <- sponsors[numchamber==2]
hcs <- cosponsors[numchamber==2]
hyears <- years[numchamber==2]

```

```{r}
## create cosponsorship ties
## output is
##    sponsor cosponsor
## adapted the older edges function to be a bit faster
edges <- function(spons, cospons) {
  out <- list()
  k <- 1
  for (i in seq_along(spons)) {
    # cosponsors for bill i
    line <- cospons[i]
    if (is.na(line) || line == "") next
    ids <- unlist(strsplit(line, " "))
    ids <- ids[ids != ""]
    ids <- as.numeric(ids)
    ids <- ids[!is.na(ids)]
    # create edges
    for (c in ids) {
      out[[k]] <- c(spons[i], c)
      k <- k + 1
    }
  }
  do.call(rbind, out)
}

```

```{r}
## next adapting the adj matrix, but need to create the updated ICPSR id list
## first--can do this by running code in new database--will make a scalable
## script

```

```{r}
## Calculates Congressional Productivity Percentages for Each Congress 108-118
## Total bill count variables from the dataset
total_HRs_108 = 5431
total_HRs_109 = 6436
total_HRs_110 = 7340
total_HRs_111 = 6570
total_HRs_112 = 6729
total_HRs_113 = 5893
total_HRs_114 = 6536
total_HRs_115 = 7401
total_HRs_116 = 9067
total_HRs_117 = 9709
total_HRs_118 = 10564

# (will take count of entries in that column on spreadsheet)
total_commemorative_108 = b
total_commemorative_109 = b
total_commemorative_110 = b
total_commemorative_111 = b
total_commemorative_112 = b
total_commemorative_113 = b
total_commemorative_114 = b
total_commemorative_115 = b
total_commemorative_116 = b
total_commemorative_117 = b
total_commemorative_118 = b

total_subsig_108 = b
total_subsig_109 = b
total_subsig_110 = b
total_subsig_111 = b
total_subsig_112 = b
total_subsig_113 = b
total_subsig_114 = b
total_subsig_115 = b
total_subsig_116 = b
total_subsig_117 = b
total_subsig_118 = b

total_substantive_108 = total_HRs_108 - (total_subsig_108 + total_commemorative_108)
total_substantive_109 = total_HRs_109 - (total_subsig_109 + total_commemorative_109)
total_substantive_110 = total_HRs_110 - (total_subsig_110 + total_commemorative_110)
total_substantive_111 = total_HRs_111 - (total_subsig_111 + total_commemorative_111)
total_substantive_112 = total_HRs_112 - (total_subsig_112 + total_commemorative_112)
total_substantive_113 = total_HRs_113 - (total_subsig_113 + total_commemorative_113)
total_substantive_114 = total_HRs_114 - (total_subsig_114 + total_commemorative_114)
total_substantive_115 = total_HRs_115 - (total_subsig_115 + total_commemorative_115)
total_substantive_116 = total_HRs_116 - (total_subsig_116 + total_commemorative_116)
total_substantive_117 = total_HRs_117 - (total_subsig_117 + total_commemorative_117)
total_substantive_118 = total_HRs_118 - (total_subsig_118 + total_commemorative_118)

# Productivity Measures for Each Congress

# 108th
percentage_com_108 = total_commemorative_108 / total_HRs_108
percentage_substantive_108 = total_substantive_108 / total_HRs_108
percentage_subisg_108 = total_subsig_108 / total_HRs_108

# 109th
percentage_com_109 = total_commemorative_109 / total_HRs_109
percentage_substantive_109 = total_substantive_109 / total_HRs_109
percentage_subisg_109 = total_subsig_109 / total_HRs_109

# 110th
percentage_com_110 = total_commemorative_110 / total_HRs_110
percentage_substantive_110 = total_substantive_110 / total_HRs_110
percentage_subisg_110 = total_subsig_110 / total_HRs_110

# 111th
percentage_com_111 = total_commemorative_111 / total_HRs_111
percentage_substantive_111 = total_substantive_111 / total_HRs_111
percentage_subisg_111 = total_subsig_111 / total_HRs_111

# 112th
percentage_com_112 = total_commemorative_112 / total_HRs_112
percentage_substantive_112 = total_substantive_112 / total_HRs_112
percentage_subisg_112 = total_subsig_112 / total_HRs_112

# 113th
percentage_com_113 = total_commemorative_113 / total_HRs_113
percentage_substantive_113 = total_substantive_113 / total_HRs_113
percentage_subisg_113 = total_subsig_113 / total_HRs_113

# 114th
percentage_com_114 = total_commemorative_114 / total_HRs_114
percentage_substantive_114 = total_substantive_114 / total_HRs_114
percentage_subisg_114 = total_subsig_114 / total_HRs_114

# 115th
percentage_com_115 = total_commemorative_115 / total_HRs_115
percentage_substantive_115 = total_substantive_115 / total_HRs_115
percentage_subisg_115 = total_subsig_115 / total_HRs_115

# 116th
percentage_com_116 = total_commemorative_116 / total_HRs_116
percentage_substantive_116 = total_substantive_116 / total_HRs_116
percentage_subisg_116 = total_subsig_116 / total_HRs_116

# 117th
percentage_com_117 = total_commemorative_117 / total_HRs_117
percentage_substantive_117 = total_substantive_117 / total_HRs_117
percentage_subisg_117 = total_subsig_117 / total_HRs_117

# 118th
percentage_com_118 = total_commemorative_118 / total_HRs_118
percentage_substantive_118 = total_substantive_118 / total_HRs_118
percentage_subisg_118 = total_subsig_118 / total_HRs_118


```

